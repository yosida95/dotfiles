set-option -g default-terminal "screen-256color"
set-option -g default-command 'which reattach-to-user-namespace >/dev/null 2>&1 && exec reattach-to-user-namespace "$SHELL" || exec "$SHELL"'
set-option -g history-limit 5000  # 保持する履歴数を5000件に設定
set-option -g mouse-select-pane on
set-window-option -g mode-mouse on


# プレフィックスの設定
if-shell '[[ "${OSTYPE}" = darwin* ]]' 'set-option -g prefix C-a'
if-shell '[[ "${OSTYPE}" = darwin* ]]' 'bind-key C-a send-prefix'
if-shell '[[ "${OSTYPE}" = darwin* ]]' 'unbind C-b'

set-window-option -g automatic-rename on  # ウィンドウのタイトルを起動中のプロセス名にする
set-window-option -g mode-keys vi  # キーバインドをViライクにする
set-window-option -g utf8 on  # UTF8 on

set-window-option -g mode-fg black
set-window-option -g mode-bg cyan
set-window-option -g window-status-fg white
set-window-option -g window-status-bg black
set-window-option -g window-status-current-attr bold
set-window-option -g window-status-current-fg green
set-window-option -g window-status-current-bg black

set -g pane-active-border-fg colour39
set -g pane-border-fg colour245


#############################
#   ステータスバーの設定    #
#############################
set -g status-fg white
set -g status-bg colour234
set -g status-left-length 60
set -g status-right-length 60

set -g status-left '#[bg=colour254,bold] #[fg=colour202]#(whoami)#[fg=colour16]@#[fg=colour25]#(hostname -s)#[fg=colour16] [#S:#I] #[default]'
set -g status-right '#[fg=colour241]#H #[fg=colour31,bg=colour255,bold] %Y/%m/%d(%a)%H:%M #[default]'

set -g window-status-format "#[fg=white,bg=colour234] #I #W #[default]"
set -g window-status-current-format "#[fg=colour25,bg=colour39,noreverse,bold] #I  #W #[default]"


#############################
#       コピーの設定        #
#############################
bind-key y copy-mode  # yでコピーモードに切り替え
bind-key -t vi-copy Y copy-line  # Yで一行コピー
bind-key p paste-buffer  # pでバッファを挿入


#############################
#       ペインの設定        #
#############################
# sでペインを水平分割
unbind-key s
bind-key s split-window -h
# vでペインを垂直分割
unbind-key v
bind-key v split-window -v
# hで左のペインに切り替え
unbind-key h
bind-key h select-pane -L
# jで下のペインに切り替え
unbind-key j
bind-key j select-pane -D
# kで上のペインに切り替え
unbind-key k
bind-key k select-pane -U
# lで右のペインに切り替え
unbind-key l
bind-key l select-pane -R
# Tabでペインを順番に移動
unbind Tab
bind Tab select-pane -t :.+


#############################
#        雑多な設定         #
#############################
# rで設定リロード
unbind-key r
bind-key r source-file ~/.tmux.conf\; display "Reloaded!"

# C でバッファーをクリップボードにコピー (Mac only)
unbind-key C
if-shell 'test "$(uname)" = "Darwin"' 'bind-key C run "tmux save-buffer -| reattach-to-user-namespace pbcopy"'
